<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisionLab Pro - Advanced Image Processing Suite</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div>
                        <h1>VisionLab Pro</h1>
                        <p>Advanced Image Processing</p>
                    </div>
                </div>
            </div>
            
            <nav class="operations-section" role="navigation" aria-label="Image processing operations">
                <!-- Getting Started -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon" aria-hidden="true">üöÄ</span>
                        Getting Started
                    </div>
                    <button class="operation-btn" data-operation="dimensions" aria-describedby="dimensions-desc">
                        <span class="btn-icon" aria-hidden="true">üìè</span>
                        Show Dimensions
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="dimensions-desc" class="sr-only">Display image dimensions and properties</div>
                </div>

                <!-- Grayscaling -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon" aria-hidden="true">‚ö´</span>
                        Grayscaling
                    </div>
                    <button class="operation-btn" data-operation="grayscale" aria-describedby="grayscale-desc">
                        <span class="btn-icon" aria-hidden="true">üé®</span>
                        Convert to Grayscale
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="grayscale-desc" class="sr-only">Convert color images to grayscale</div>
                    
                    <button class="operation-btn" data-operation="compare-dimensions" aria-describedby="compare-desc">
                        <span class="btn-icon" aria-hidden="true">üìä</span>
                        Compare Dimensions
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="compare-desc" class="sr-only">Compare dimensions across multiple images</div>
                </div>

                <!-- Color Spaces -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon" aria-hidden="true">üåà</span>
                        Color Spaces
                    </div>
                    <button class="operation-btn" data-operation="rgb-channels" aria-describedby="rgb-desc">
                        <span class="btn-icon" aria-hidden="true">üî¥</span>
                        RGB Channels
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="rgb-desc" class="sr-only">Extract and manipulate RGB color channels</div>
                    
                    <button class="operation-btn" data-operation="hsv-convert" aria-describedby="hsv-desc">
                        <span class="btn-icon" aria-hidden="true">üéØ</span>
                        HSV Conversion
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="hsv-desc" class="sr-only">Convert images to HSV color space</div>
                    
                    <button class="operation-btn" data-operation="color-manipulation" aria-describedby="color-desc">
                        <span class="btn-icon" aria-hidden="true">üé™</span>
                        Color Manipulation
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="color-desc" class="sr-only">Adjust colors, saturation, and hue</div>
                </div>

                <!-- Drawing & Shapes -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon" aria-hidden="true">‚úèÔ∏è</span>
                        Drawing & Shapes
                    </div>
                    <button class="operation-btn" data-operation="draw-shapes" aria-describedby="shapes-desc">
                        <span class="btn-icon" aria-hidden="true">üî∑</span>
                        Draw Shapes
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="shapes-desc" class="sr-only">Add geometric shapes to images</div>
                    
                    <button class="operation-btn" data-operation="add-text" aria-describedby="text-desc">
                        <span class="btn-icon" aria-hidden="true">üìù</span>
                        Add Text
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="text-desc" class="sr-only">Add text overlays to images</div>
                </div>

                <!-- Transformations -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon" aria-hidden="true">üîÑ</span>
                        Transformations
                    </div>
                    <button class="operation-btn" data-operation="translate" aria-describedby="translate-desc">
                        <span class="btn-icon" aria-hidden="true">üìê</span>
                        Translation
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="translate-desc" class="sr-only">Move images horizontally and vertically</div>
                    
                    <button class="operation-btn" data-operation="rotate" aria-describedby="rotate-desc">
                        <span class="btn-icon" aria-hidden="true">üîÑ</span>
                        Rotation
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="rotate-desc" class="sr-only">Rotate images by specified angles</div>
                    
                    <button class="operation-btn" data-operation="flip" aria-describedby="flip-desc">
                        <span class="btn-icon" aria-hidden="true">üîÄ</span>
                        Flip Image
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="flip-desc" class="sr-only">Flip images horizontally or vertically</div>
                </div>

                <!-- Scaling & Resizing -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon" aria-hidden="true">üìè</span>
                        Scaling & Resizing
                    </div>
                    <button class="operation-btn" data-operation="resize" aria-describedby="resize-desc">
                        <span class="btn-icon" aria-hidden="true">üîç</span>
                        Resize Image
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="resize-desc" class="sr-only">Change image dimensions and resolution</div>
                    
                    <button class="operation-btn" data-operation="pyramid" aria-describedby="pyramid-desc">
                        <span class="btn-icon" aria-hidden="true">üèîÔ∏è</span>
                        Image Pyramid
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="pyramid-desc" class="sr-only">Create multi-resolution image pyramids</div>
                    
                    <button class="operation-btn" data-operation="crop" aria-describedby="crop-desc">
                        <span class="btn-icon" aria-hidden="true">‚úÇÔ∏è</span>
                        Crop Image
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="crop-desc" class="sr-only">Crop images to specific regions</div>
                </div>

                <!-- Arithmetic & Bitwise -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon" aria-hidden="true">üßÆ</span>
                        Arithmetic & Bitwise
                    </div>
                    <button class="operation-btn" data-operation="arithmetic" aria-describedby="arithmetic-desc">
                        <span class="btn-icon" aria-hidden="true">‚ûï</span>
                        Arithmetic Ops
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="arithmetic-desc" class="sr-only">Perform arithmetic operations on images</div>
                    
                    <button class="operation-btn" data-operation="bitwise" aria-describedby="bitwise-desc">
                        <span class="btn-icon" aria-hidden="true">‚ö°</span>
                        Bitwise Ops
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="bitwise-desc" class="sr-only">Apply bitwise operations to images</div>
                </div>

                <!-- Filtering -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon" aria-hidden="true">‚ú®</span>
                        Filtering & Enhancement
                    </div>
                    <button class="operation-btn" data-operation="blur" aria-describedby="blur-desc">
                        <span class="btn-icon" aria-hidden="true">üåÄ</span>
                        Blur Effects
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="blur-desc" class="sr-only">Apply various blur effects to images</div>
                    
                    <button class="operation-btn" data-operation="sharpen" aria-describedby="sharpen-desc">
                        <span class="btn-icon" aria-hidden="true">üî™</span>
                        Sharpen Image
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="sharpen-desc" class="sr-only">Enhance image sharpness and detail</div>
                    
                    <button class="operation-btn" data-operation="denoise" aria-describedby="denoise-desc">
                        <span class="btn-icon" aria-hidden="true">üßπ</span>
                        Denoise
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="denoise-desc" class="sr-only">Remove noise from images</div>
                </div>

                <!-- Thresholding -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon" aria-hidden="true">‚öñÔ∏è</span>
                        Thresholding
                    </div>
                    <button class="operation-btn" data-operation="threshold" aria-describedby="threshold-desc">
                        <span class="btn-icon" aria-hidden="true">‚ö´</span>
                        Binary Threshold
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="threshold-desc" class="sr-only">Apply binary thresholding to images</div>
                    
                    <button class="operation-btn" data-operation="adaptive-threshold" aria-describedby="adaptive-desc">
                        <span class="btn-icon" aria-hidden="true">üéõÔ∏è</span>
                        Adaptive Threshold
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="adaptive-desc" class="sr-only">Apply adaptive thresholding techniques</div>
                </div>

                <!-- Morphology & Edge Detection -->
                <div class="operation-group">
                    <div class="section-title">
                        <span class="section-icon" aria-hidden="true">üîç</span>
                        Morphology & Edges
                    </div>
                    <button class="operation-btn" data-operation="dilation" aria-describedby="dilation-desc">
                        <span class="btn-icon" aria-hidden="true">üìà</span>
                        Dilation
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="dilation-desc" class="sr-only">Apply morphological dilation</div>
                    
                    <button class="operation-btn" data-operation="erosion" aria-describedby="erosion-desc">
                        <span class="btn-icon" aria-hidden="true">üìâ</span>
                        Erosion
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="erosion-desc" class="sr-only">Apply morphological erosion</div>
                    
                    <button class="operation-btn" data-operation="opening" aria-describedby="opening-desc">
                        <span class="btn-icon" aria-hidden="true">üåÖ</span>
                        Opening
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="opening-desc" class="sr-only">Apply morphological opening operation</div>
                    
                    <button class="operation-btn" data-operation="closing" aria-describedby="closing-desc">
                        <span class="btn-icon" aria-hidden="true">üåÑ</span>
                        Closing
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="closing-desc" class="sr-only">Apply morphological closing operation</div>
                    
                    <button class="operation-btn" data-operation="edge-detection" aria-describedby="edge-desc">
                        <span class="btn-icon" aria-hidden="true">üîç</span>
                        Canny Edge Detection
                        <span class="btn-arrow" aria-hidden="true">‚Üí</span>
                    </button>
                    <div id="edge-desc" class="sr-only">Detect edges using Canny algorithm</div>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <nav class="breadcrumb" aria-label="Breadcrumb navigation">
                        <span class="breadcrumb-item">Dashboard</span>
                        <span class="breadcrumb-separator" aria-hidden="true">‚Ä∫</span>
                        <span class="breadcrumb-item active" aria-current="page">Multi-Image Processing</span>
                    </nav>
                </div>
                <div class="header-right">
                    <div class="status-indicator">
                        <div class="status-dot online" aria-hidden="true"></div>
                        <span id="backendStatus">Connected</span>
                    </div>
                </div>
            </header>

            <!-- Toolbar -->
            <div class="toolbar">
                <div class="toolbar-left">
                    <div class="file-input-wrapper">
                        <input type="file" 
                               id="imageInput" 
                               class="file-input" 
                               accept="image/*" 
                               multiple
                               aria-label="Select multiple image files for processing">
                        <button class="btn btn-primary" 
                                onclick="document.getElementById('imageInput').click()"
                                aria-describedby="load-images-help">
                            <span class="btn-icon" aria-hidden="true">üìÅ</span>
                            Load Images
                        </button>
                        <div id="load-images-help" class="sr-only">Click to select multiple images from your device</div>
                    </div>
                    <button class="btn btn-secondary" 
                            onclick="clearAllImages()"
                            aria-describedby="clear-help">
                        <span class="btn-icon" aria-hidden="true">üóëÔ∏è</span>
                        Clear All
                    </button>
                    <div id="clear-help" class="sr-only">Remove all loaded images</div>
                    
                    <button class="btn btn-accent" 
                            id="processAllBtn" 
                            onclick="processAllImages()" 
                            disabled
                            aria-describedby="process-help">
                        <span class="btn-icon" aria-hidden="true">‚ö°</span>
                        Process All
                    </button>
                    <div id="process-help" class="sr-only">Apply selected operation to all images</div>
                </div>
                <div class="toolbar-right">
                    <div class="view-toggle" role="tablist" aria-label="View mode selection">
                        <button class="btn btn-outline view-btn active" disabled
                                data-view="grid" 
                                onclick="toggleView('grid')"
                                role="tab"
                                aria-selected="true"
                                aria-controls="imageGallery">
                            <span class="btn-icon" aria-hidden="true">‚äû</span>
                            Grid View
                        </button>
    
                    </div>
                    <div class="export-dropdown">
                        <button class="btn btn-success" 
                                onclick="toggleExportDropdown()"
                                aria-haspopup="true"
                                aria-expanded="false"
                                aria-controls="exportDropdown">
                            <span class="btn-icon" aria-hidden="true">üíæ</span>
                            Export Results
                            <span class="dropdown-arrow" aria-hidden="true">‚ñº</span>
                        </button>
                        <div class="export-dropdown-menu" id="exportDropdown" role="menu">
                            <button class="export-option" onclick="exportAs('png')" role="menuitem">
                                <span class="export-icon" aria-hidden="true">üñºÔ∏è</span>
                                PNG Images
                            </button>
                            <button class="export-option" onclick="exportAs('jpg')" role="menuitem">
                                <span class="export-icon" aria-hidden="true">üì∏</span>
                                JPG Images
                            </button>
                            <button class="export-option" onclick="exportAsPDF()" role="menuitem">
                                <span class="export-icon" aria-hidden="true">üìÑ</span>
                                PDF Report
                            </button>
                            <button class="export-option" onclick="exportAll()" role="menuitem">
                                <span class="export-icon" aria-hidden="true">üì¶</span>
                                Export All
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Multi-Image Workspace -->
            <div class="workspace">
                <!-- Image Gallery Container -->
                <div class="image-gallery" 
                     id="imageGallery" 
                     role="tabpanel" 
                     id="grid-panel"
                     aria-labelledby="grid-tab">
                    <div class="gallery-placeholder">
                        <div class="placeholder-icon" aria-hidden="true">
                            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <polyline points="21,15 16,10 5,21"/>
                            </svg>
                        </div>
                        <h3>Load multiple images to get started</h3>
                        <p>Select multiple images to process them simultaneously</p>
                        <p class="format-info">Supports JPG, PNG, BMP, TIFF formats</p>
                        <button class="btn btn-primary" 
                                onclick="document.getElementById('imageInput').click()">
                            <span class="btn-icon" aria-hidden="true">üìÅ</span>
                            Choose Multiple Images
                        </button>
                    </div>
                </div>

                <!-- Dynamic Controls Panel -->
                <div class="controls-panel" id="controlsPanel">
                    <div class="controls-header">
                        <h4>Processing Controls</h4>
                        <div class="controls-actions">
                            <span class="selected-count" id="selectedCount">0 images selected</span>
                            <button class="icon-btn" 
                                    onclick="closeControls()"
                                    aria-label="Close controls panel">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"/>
                                    <line x1="6" y1="6" x2="18" y2="18"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="controls-content" id="controlsContent">
                        <!-- Dynamic controls will be inserted here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Status Bar -->
    <div class="status-bar" role="status" aria-live="polite">
        <div class="status-left">
            <span id="statusText">Ready for multi-image processing</span>
        </div>
        <div class="status-center">
            <div class="progress-container">
                <div class="progress-bar" role="progressbar" aria-label="Image processing progress" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">0%</span>
            </div>
        </div>
        <div class="status-right">
            <span id="imageCount">No images loaded</span>
        </div>
    </div>

    <!-- PDF Report Modal -->
    <div class="modal-overlay" id="pdfModal" role="dialog" aria-labelledby="pdfModalTitle" aria-modal="true">
        <div class="modal">
            <div class="modal-header">
                <h2 id="pdfModalTitle">Generate Multi-Image PDF Report</h2>
                <button class="icon-btn" 
                        onclick="closePDFModal()"
                        aria-label="Close modal">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            
            <div class="modal-body">
                <p class="modal-description">Configure your multi-image PDF report settings</p>
                
                <div class="control-group">
                    <label for="pdfTitle">Report Title</label>
                    <input type="text" 
                           id="pdfTitle" 
                           value="Multi-Image Processing Report" 
                           class="control-input">
                </div>
                
                <div class="control-group">
                    <label for="includeOriginal">
                        <input type="checkbox" id="includeOriginal" checked>
                        Include Original Images
                    </label>
                </div>
                
                <div class="control-group">
                    <label for="includeProcessed">
                        <input type="checkbox" id="includeProcessed" checked>
                        Include Processed Images
                    </label>
                </div>
                
                <div class="control-group">
                    <label for="includeDetails">
                        <input type="checkbox" id="includeDetails" checked>
                        Include Processing Details
                    </label>
                </div>
                
                <div class="control-group">
                    <label for="includeMetadata">
                        <input type="checkbox" id="includeMetadata" checked>
                        Include Metadata
                    </label>
                </div>
                
                <div class="control-group">
                    <label for="imagesPerPage">Images per Page</label>
                    <select id="imagesPerPage" class="control-input">
                        <option value="1">1 image per page</option>
                        <option value="2" selected>2 images per page</option>
                        <option value="4">4 images per page</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="pdfNotes">Additional Notes</label>
                    <textarea id="pdfNotes" 
                              placeholder="Add any additional notes..." 
                              rows="3" 
                              class="control-input"></textarea>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closePDFModal()">Cancel</button>
                <button class="btn btn-primary" onclick="generateMultiImagePDFReport()">Generate PDF</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
</body>
</html>